import{_ as s,W as i,X as l,Y as e,Z as o,$ as a,a0 as t,C as c}from"./framework-0d71bc9d.js";const r={},d=t('<h1 id="cookie" tabindex="-1"><a class="header-anchor" href="#cookie" aria-hidden="true">#</a> Cookie</h1><h2 id="definition" tabindex="-1"><a class="header-anchor" href="#definition" aria-hidden="true">#</a> Definition</h2><ul><li>cookie 是服务器发送给浏览器的键值对，存储在浏览器。</li></ul><h2 id="role" tabindex="-1"><a class="header-anchor" href="#role" aria-hidden="true">#</a> Role</h2>',4),p=e("p",null,"Ref:",-1),u={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies",target:"_blank",rel:"noopener noreferrer"},h={href:"https://http.dev/cookies#usage",target:"_blank",rel:"noopener noreferrer"},k=e("ul",null,[e("li",null,"追踪（Tracking）：记录和分析用户行为。"),e("li",null,"会话管理（Session Management）：HTTP 是无状态的协议，cookie 可用于记录登录状态等。"),e("li",null,"个性化（Personalization）：记录用户喜好、主题和其他设置。")],-1),_=e("h2",{id:"access",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#access","aria-hidden":"true"},"#"),o(" Access")],-1),m={href:"https://javascript.info/cookie#reading-from-document-cookie",target:"_blank",rel:"noopener noreferrer"},f=t('<ul><li>获取 cookie：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>document<span class="token punctuation">.</span>cookie\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>写入 cookie：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&#39;name&#39;</span>\n<span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token string">&#39;Eathyn&#39;</span>\ndocument<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>每个 cookie 键值对的大小不可以超过 4KB。</li></ul><h2 id="options" tabindex="-1"><a class="header-anchor" href="#options" aria-hidden="true">#</a> Options</h2><h3 id="path" tabindex="-1"><a class="header-anchor" href="#path" aria-hidden="true">#</a> path</h3>',7),b=e("p",null,"Ref:",-1),g={href:"https://javascript.info/cookie#path",target:"_blank",rel:"noopener noreferrer"},x={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#:~:text=mozilla.org.-,Path%20attribute,-The%20Path%20attribute",target:"_blank",rel:"noopener noreferrer"},v=t('<ul><li><p>如果当前路径不匹配 <code>path</code> 选项，那么该 cookie 无法保存到浏览器，也不会作为 Cookie 请求头发送给服务器。</p></li><li><p>如果 <code>path=/docs</code>，那么 <code>/docs</code>, <code>/docs/</code>, <code>/docs/web</code> 都匹配。</p></li></ul><h3 id="domain" tabindex="-1"><a class="header-anchor" href="#domain" aria-hidden="true">#</a> domain</h3>',2),T={href:"https://javascript.info/cookie#domain",target:"_blank",rel:"noopener noreferrer"},C=t('<ul><li><p>cookie 无法被其他二级域名获取。例如：<code>a.com</code> 中的 cookie 无法被 <code>b.com</code> 获取。</p></li><li><p>默认情况下，cookie 无法被子域获取。例如：<code>a.com</code> 中的 cookie 无法被 <code>test.a.com</code> 获取。</p></li><li><p>将 <code>domain</code> 选项设置为根域（root domain），那么 cookie 就可以被自域获取。例如：设置 <code>domain=a.com</code> 之后，<code>a.com</code> 中的 cookie 可以被 <code>test.a.com</code> 获取。</p></li></ul><h3 id="expires-max-age" tabindex="-1"><a class="header-anchor" href="#expires-max-age" aria-hidden="true">#</a> expires, max-age</h3>',2),R=e("p",null,"Ref:",-1),j={href:"https://javascript.info/cookie#expires-max-age",target:"_blank",rel:"noopener noreferrer"},P={href:"https://stackoverflow.com/a/10772420",target:"_blank",rel:"noopener noreferrer"},S=t('<ul><li><p>没有设置 <code>expires</code> 和 <code>max-age</code> 的 cookie 称为 session cookie，特点是浏览器关闭后 cookie 就会被删除。</p></li><li><p>设置 <code>expires</code> 和 <code>max-age</code> 之后，关闭浏览器 cookie 在过期之前不会被删除。</p></li><li><p>如果将浏览器的启动时的选项设置为继续浏览上次打开的网页，那么关闭浏览器后 session cookie 不会自动删除。</p></li><li><p>将 <code>expires</code> 设置为过去的时间或者将 <code>max-age</code> 设置为零或负数，就可以删除 cookie。</p></li></ul><h3 id="secure" tabindex="-1"><a class="header-anchor" href="#secure" aria-hidden="true">#</a> secure</h3>',2),w=e("p",null,"Ref:",-1),y={href:"https://javascript.info/cookie#secure",target:"_blank",rel:"noopener noreferrer"},q={href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies:~:text=HTTP%20(except%20on-,localhost,-)%2C%20which%20means%20man",target:"_blank",rel:"noopener noreferrer"},H=e("ul",null,[e("li",null,[o("将 "),e("code",null,"secure"),o(" 设置为 "),e("code",null,"true"),o(" 之后，cookie 只能在使用 "),e("code",null,"HTTPS"),o(" 协议的网站（除了 "),e("code",null,"localhost"),o("）上保存和发送。")])],-1),U=e("h3",{id:"samesite",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#samesite","aria-hidden":"true"},"#"),o(" samesite")],-1),z=e("p",null,"Ref:",-1),E={href:"https://javascript.info/cookie#samesite",target:"_blank",rel:"noopener noreferrer"},B={href:"https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie#:~:text=current%20document%20location.-,%3Bsamesite,-%3A%20SameSite%20prevents",target:"_blank",rel:"noopener noreferrer"},I=t('<ul><li><p><code>samesite</code> 选项可以避免跨站请求伪造（Cross-Site Request Forgery, CSRF）攻击。</p></li><li><p><code>samesite: &#39;none&#39;</code> 表示 cookie 可以在同站（same-site）或跨站（cross-site）中传输。</p></li><li><p><code>samesite: &#39;lax&#39;</code> 表示 cookie 可以在同站（same-site）或跨站（cross-site）中传输，跨站请求传输的要求是请求必须是安全的（例如：GET）并且执行的是顶级导航（top-level navigation）操作（即：在浏览器的地址栏中改变 URL）。</p></li><li><p><code>samesite: &#39;strict&#39;</code> 表示 cookie 只能在同站（same-site）中传输。</p></li></ul><h3 id="http-only" tabindex="-1"><a class="header-anchor" href="#http-only" aria-hidden="true">#</a> http-only</h3><h2 id="code" tabindex="-1"><a class="header-anchor" href="#code" aria-hidden="true">#</a> Code</h2>',3),W=e("p",null,"Ref:",-1),A={href:"https://www.section.io/engineering-education/what-are-cookies-nodejs/",target:"_blank",rel:"noopener noreferrer"},N={href:"https://github.com/Eathyn/authentication/tree/cookie",target:"_blank",rel:"noopener noreferrer"};function O(V,L){const n=c("ExternalLinkIcon");return i(),l("div",null,[d,e("blockquote",null,[p,e("ul",null,[e("li",null,[e("a",u,[o("HTTP Cookie"),a(n)])]),e("li",null,[e("a",h,[o("HTTP Cookie"),a(n)])])])]),k,_,e("blockquote",null,[e("p",null,[o("Ref: "),e("a",m,[o("Access Cookie"),a(n)])])]),f,e("blockquote",null,[b,e("ul",null,[e("li",null,[e("a",g,[o("path Option"),a(n)])]),e("li",null,[e("a",x,[o("path Option"),a(n)])])])]),v,e("blockquote",null,[e("p",null,[o("Ref: "),e("a",T,[o("domain Option"),a(n)])])]),C,e("blockquote",null,[R,e("ul",null,[e("li",null,[e("a",j,[o("expires, max-age options"),a(n)])]),e("li",null,[e("a",P,[o("Chrome doesn't delete session cookies"),a(n)])])])]),S,e("blockquote",null,[w,e("ul",null,[e("li",null,[e("a",y,[o("secure option"),a(n)])]),e("li",null,[e("a",q,[o("secure option works on localhost"),a(n)])])])]),H,U,e("blockquote",null,[z,e("ul",null,[e("li",null,[e("a",E,[o("samesite option"),a(n)])]),e("li",null,[e("a",B,[o("samesite option"),a(n)])])])]),I,e("blockquote",null,[W,e("ul",null,[e("li",null,[e("a",A,[o("Cookie Practice"),a(n)])]),e("li",null,[e("a",N,[o("Repo"),a(n)])])])])])}const D=s(r,[["render",O],["__file","index.html.vue"]]);export{D as default};
