import{_ as d,W as u,X as k,Y as n,Z as s,$ as a,a1 as o,a0 as t,C as p}from"./framework-0d71bc9d.js";const v={},m=n("h1",{id:"mode",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#mode","aria-hidden":"true"},"#"),s(" Mode")],-1),b=n("p",null,[s("介绍几种可以在 "),n("code",null,"webpack.config.js"),s(" 中获取 webpack 的 "),n("code",null,"mode"),s(" 的方式。")],-1),g=n("h2",{id:"dotenv",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#dotenv","aria-hidden":"true"},"#"),s(" dotenv")],-1),_=n("p",null,"Reference",-1),h={href:"https://juejin.cn/post/6915214622601674760",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/motdotla/dotenv",target:"_blank",rel:"noopener noreferrer"},w=t(`<ul><li>安装 <code>dotenv</code>。</li></ul><div class="language-npm line-numbers-mode" data-ext="npm"><pre class="language-npm"><code>npm i --save-dev dotenv
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>创建 <code>.env.development</code> 和 <code>.env.production</code> 文件，增加 <code>NODE_ENV</code> 变量。</li></ul>`,3),x=n("div",{class:"language-.env.development line-numbers-mode","data-ext":".env.development"},[n("pre",{class:"language-.env.development"},[n("code",null,`NODE_ENV='development'
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),j=n("div",{class:"language-.env.production line-numbers-mode","data-ext":".env.production"},[n("pre",{class:"language-.env.production"},[n("code",null,`NODE_ENV='production'
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),q=t(`<ul><li>在 <code>package.json</code> 中设置 webpack-CLI 的 <code>mode</code> 参数。</li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode=development&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode=production&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在 <code>webpack.config.js</code> 中获取 webpack-CLI 的 <code>mode</code> 参数。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arg <span class="token operator">===</span> <span class="token string">&#39;--mode=development&#39;</span> <span class="token operator">||</span> arg <span class="token operator">===</span> <span class="token string">&#39;--mode=production&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;package.json 中的 webpack 参数设置错误&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> mode <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;=&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;dotenv&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>然后就可以通过 <code>const devMode = p<wbr>rocess.env.NODE_ENV</code> 获取 webpack 的 <code>mode</code>。</li></ul><h2 id="function-argument" tabindex="-1"><a class="header-anchor" href="#function-argument" aria-hidden="true">#</a> function argument</h2>`,6),y=n("p",null,"Reference",-1),E={href:"https://stackoverflow.com/questions/49274713/get-current-mode-in-webpack-config-js",target:"_blank",rel:"noopener noreferrer"},N={href:"https://webpack.js.org/configuration/mode/#mode-none",target:"_blank",rel:"noopener noreferrer"},V=t(`<ul><li>通过 <code>argv.mode</code> 参数可以获得 webpack 的 <code>mode</code>。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env<span class="token punctuation">,</span> argv</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> devMode <span class="token operator">=</span> argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">&#39;development&#39;</span>
  
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// entry</span>
    <span class="token comment">// output</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2);function C(D,I){const e=p("ExternalLinkIcon"),c=p("CodeTabs");return u(),k("div",null,[m,b,g,n("blockquote",null,[_,n("ul",null,[n("li",null,[n("a",h,[s("dotenv 介绍"),a(e)])]),n("li",null,[n("a",f,[s("dotenv 文档"),a(e)])])])]),w,a(c,{id:"41",data:[{title:".env.development"},{title:".env.production"}]},{tab0:o(({title:l,value:i,isActive:r})=>[x]),tab1:o(({title:l,value:i,isActive:r})=>[j]),_:1},8,["data"]),q,n("blockquote",null,[y,n("ul",null,[n("li",null,[n("a",E,[s("StackOverflow: Get '--mode' in webpack.config.js"),a(e)])]),n("li",null,[n("a",N,[s("Docs: mode"),a(e)])])])]),V])}const L=d(v,[["render",C],["__file","index.html.vue"]]);export{L as default};
