import{_ as t,W as i,X as p,Y as n,Z as s,$ as e,a0 as l,C as o}from"./framework-0d71bc9d.js";const c={},d=n("h1",{id:"constrain",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#constrain","aria-hidden":"true"},"#"),s(" Constrain")],-1),r=n("h2",{id:"primary-key",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#primary-key","aria-hidden":"true"},"#"),s(" Primary Key")],-1),u={href:"https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-primary-key/",target:"_blank",rel:"noopener noreferrer"},k=l(`<ul><li>主键（primary key）是一列或一组列，用来标识独一无二的行。</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">(</span>
	column_1 data_type PRIMARY KEY<span class="token punctuation">,</span>
	column_2 data_type<span class="token punctuation">,</span>
	…
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>主键限制是非空（NOT NULL）限制和唯一（UNIQUE）限制的组合。</p></li><li><p>一个表只能有一个主键。</p></li><li><p>添加主键限制：</p></li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name
<span class="token keyword">ADD</span> PRIMARY KEY <span class="token punctuation">(</span>column_1<span class="token punctuation">,</span> column_2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>删除主键限制：</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name
<span class="token keyword">DROP</span> CONSTRAINT table_name_pkey<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="foreign-key" tabindex="-1"><a class="header-anchor" href="#foreign-key" aria-hidden="true">#</a> Foreign Key</h2>`,7),v={href:"https://www.postgresqltutorial.com/postgresql-tutorial/postgresql-foreign-key/",target:"_blank",rel:"noopener noreferrer"},m=l(`<ul><li><p>外键（foreign key）是一列或一组列，用来引用其他表的主键。</p></li><li><p>包含外键的表称为引用表（referencing table）或子表（child table）。被引用为外键的表称为被引用表（referenced table）或父表（parent table）。</p></li><li><p>设置外键。<code>ON DELETE</code> 和 <code>ON UPDATE</code> 表示父表的主键被删除或更新时要实行的操作：</p></li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token punctuation">[</span>CONSTRAINT foreign_key_name<span class="token punctuation">]</span>
  FOREIGN KEY<span class="token punctuation">(</span>foreign_key_columns<span class="token punctuation">)</span>
    REFERENCES parent_table<span class="token punctuation">(</span>parent_key_columns<span class="token punctuation">)</span>
    <span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">DELETE</span> delete_action<span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> update_action<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>ON DELETE SET NULL</code>：父表的主键被删除时将子表对应的外键设置为 <code>NULL</code>：</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token punctuation">[</span>CONSTRAINT foreign_key_name<span class="token punctuation">]</span>
  FOREIGN KEY<span class="token punctuation">(</span>foreign_key_columns<span class="token punctuation">)</span>
    REFERENCES parent_table<span class="token punctuation">(</span>parent_key_columns<span class="token punctuation">)</span>
    <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token keyword">NULL</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>ON DELETE CASCADE</code>：父表的主键被删除时将子表对应的行删除。这是最常用的方法：</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token punctuation">[</span>CONSTRAINT foreign_key_name<span class="token punctuation">]</span>
  FOREIGN KEY<span class="token punctuation">(</span>foreign_key_columns<span class="token punctuation">)</span>
    REFERENCES parent_table<span class="token punctuation">(</span>parent_key_columns<span class="token punctuation">)</span>
    <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>ON DELETE SET DEFAULT</code>：父表的主键被删除时将子表对应的外键设置为默认值：</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token punctuation">[</span>CONSTRAINT foreign_key_name<span class="token punctuation">]</span>
  FOREIGN KEY<span class="token punctuation">(</span>foreign_key_columns<span class="token punctuation">)</span>
    REFERENCES parent_table<span class="token punctuation">(</span>parent_key_columns<span class="token punctuation">)</span>
    <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>为已有的表添加外键：</li></ul><div class="language-plsql line-numbers-mode" data-ext="plsql"><pre class="language-plsql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> child_table 
<span class="token keyword">ADD</span> CONSTRAINT constraint_name 
FOREIGN KEY <span class="token punctuation">(</span>foreign_key_columns<span class="token punctuation">)</span> 
REFERENCES parent_table <span class="token punctuation">(</span>parent_key_columns<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">DELETE</span> delete_action<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> update_action<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10);function E(_,b){const a=o("ExternalLinkIcon");return i(),p("div",null,[d,r,n("blockquote",null,[n("p",null,[s("Reference: "),n("a",u,[s("Primary Key"),e(a)])])]),k,n("blockquote",null,[n("p",null,[s("Reference: "),n("a",v,[s("Foreign Key"),e(a)])])]),m])}const g=t(c,[["render",E],["__file","index.html.vue"]]);export{g as default};
