import{_ as u,W as k,X as d,Y as n,Z as s,$ as o,a1 as a,a0 as r,C as c}from"./framework-0d71bc9d.js";const m="/blog/assets/chunk_async-498ac827.png",b="/blog/assets/chunk_initial_1-769ea169.png",v="/blog/assets/chunk_initial_2-4e146a58.png",h="/blog/assets/chunk_all-84bb2796.png",g={},y=n("h1",{id:"split-chunks",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#split-chunks","aria-hidden":"true"},"#"),s(" Split Chunks")],-1),_=n("h2",{id:"role",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#role","aria-hidden":"true"},"#"),s(" Role")],-1),j={href:"https://juejin.cn/post/7118953143475372039#heading-0",target:"_blank",rel:"noopener noreferrer"},f=n("ul",null,[n("li",null,"如果有多个入口文件都导入同一个模块，那么这些入口文件的打包结果中都包含了这个模块的代码。split chunk 的作用是将这个模块的代码打包为单独的文件，然后入口文件的打包结果再引入这个单独的文件，这个可以让入口文件的打包结果有更小的体积。"),n("li",null,"split chunk 的作用可以把一个 chunk 拆分为多个 chunk，特别是一些不太可能会改动的第三方库要拆分出来，才能保证其他库或代码改变后不会重新生成该库的打包文件，这样浏览器下次加载这个包时可以直接从缓存中加载。")],-1),x=n("h2",{id:"chunks-option",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#chunks-option","aria-hidden":"true"},"#"),s(" Chunks Option")],-1),w=n("p",null,"Reference:",-1),C={href:"https://juejin.cn/post/7118953143475372039#heading-1",target:"_blank",rel:"noopener noreferrer"},$=n("h3",{id:"async",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#async","aria-hidden":"true"},"#"),s(" async")],-1),z=n("ul",null,[n("li",null,"将同步导入的 chunk 打包到输出文件，将异步导入的 chunk 打包为单独的文件。")],-1),A=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_a.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_b.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"chunkFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].chunk.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'async'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),G=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/module_a'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'@/module_b'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/module_a'"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/module_b'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),S=r('<figure><img src="'+m+'" alt="同步引入的  被打包到输出文件，异步引入的  被打包拆分为独立文件" height="300" tabindex="0" loading="lazy"><figcaption>同步引入的 <code>module_b</code> 被打包到输出文件，异步引入的 <code>module_b</code> 被打包拆分为独立文件</figcaption></figure><h3 id="initial" tabindex="-1"><a class="header-anchor" href="#initial" aria-hidden="true">#</a> initial</h3><ul><li>如果 chunk 被其他模块<strong>都</strong>以同步或<strong>都</strong>以异步的形式导入，那么该 chunk 将被打包为单独的文件。</li></ul>',3),N=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_a.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_b.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"chunkFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].chunk.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'initial'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),R=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'@/module_a'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),V=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'@/module_a'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),q=n("figure",null,[n("img",{src:b,alt:" 都以同步的方式导入，会被打包为单独的文件",height:"300",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"module_a"),s(" 都以同步的方式导入，会被打包为单独的文件")])],-1),F=n("ul",null,[n("li",null,[s("如果 chunk 被一些模块以异步的方式导入，被一些模块以同步的方式导入，那么"),n("strong",null,"异步"),s("导入的 chunk 会被打包为单独的文件，而"),n("strong",null,"同步"),s("导入的 chunk 会被打包到输出文件。")])],-1),B=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_a.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_b.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"chunkFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].chunk.js'"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'initial'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'@/module_a'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),T=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/module_a'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),I=n("figure",null,[n("img",{src:v,alt:" 被同步引入和异步引入，因此分别被打包到输出文件和独立文件",height:"300",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"module_a"),s(" 被同步引入和异步引入，因此分别被打包到输出文件和独立文件")])],-1),P=n("h3",{id:"all",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#all","aria-hidden":"true"},"#"),s(" all")],-1),O=n("ul",null,[n("li",null,"同步或异步导入的 chunk 都被打包为单独的文件。大部分项目使用这个选项最合适。")],-1),W=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[s("module"),n("span",{class:"token punctuation"},"."),s("exports "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token punctuation"},"{"),s(`
  `),n("span",{class:"token literal-property property"},"entry"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"a"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_a.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"b"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'src/entry_b.js'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`

  `),n("span",{class:"token literal-property property"},"output"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"path"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token function"},"resolve"),n("span",{class:"token punctuation"},"("),s("__dirname"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'dist'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"filename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].bundle.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"chunkFilename"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'js/[name].chunk.js'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token literal-property property"},"clean"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token boolean"},"true"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  
  `),n("span",{class:"token literal-property property"},"optimization"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
    `),n("span",{class:"token literal-property property"},"splitChunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token punctuation"},"{"),s(`
      `),n("span",{class:"token literal-property property"},"minSize"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(`
      `),n("span",{class:"token literal-property property"},"chunks"),n("span",{class:"token operator"},":"),s(),n("span",{class:"token string"},"'all'"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
  `),n("span",{class:"token punctuation"},"}"),n("span",{class:"token punctuation"},","),s(`
`),n("span",{class:"token punctuation"},"}"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{class:"highlight-line"}," "),n("br"),n("br"),n("br")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),X=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),s(),n("span",{class:"token string"},"'@/module_a'"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),Y=n("div",{class:"language-javascript line-numbers-mode","data-ext":"js"},[n("pre",{class:"language-javascript"},[n("code",null,[n("span",{class:"token keyword"},"import"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'@/module_a'"),n("span",{class:"token punctuation"},")"),s(`
`)])]),n("div",{class:"highlight-lines"},[n("div",{class:"highlight-line"}," ")]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),Z=n("figure",null,[n("img",{src:h,alt:" 无论被同步引入或异步引入，都会被打包为独立文件",height:"300",tabindex:"0",loading:"lazy"}),n("figcaption",null,[n("code",null,"module_a"),s(" 无论被同步引入或异步引入，都会被打包为独立文件")])],-1),D=n("h2",{id:"cache-groups",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cache-groups","aria-hidden":"true"},"#"),s(" Cache Groups")],-1),H=n("p",null,"Reference:",-1),J={href:"https://webpack.js.org/plugins/split-chunks-plugin/#splitchunkscachegroups",target:"_blank",rel:"noopener noreferrer"},K={href:"https://juejin.cn/post/7118953143475372039#heading-5",target:"_blank",rel:"noopener noreferrer"},M={href:"https://panjiachen.github.io/awesome-bookmarks/blog/webpack/webpack4-b.html",target:"_blank",rel:"noopener noreferrer"},Q=r(`<h3 id="role-1" tabindex="-1"><a class="header-anchor" href="#role-1" aria-hidden="true">#</a> Role</h3><ul><li><p>如果没有使用 <code>cacheGroups</code>，大部分的包就会被打包到同一个输出文件中，这会造成该输出文件体积过大。当下载或更新其中一个包时，会导致整个输出文件的 hash 改变，从而导致浏览器缓存失效。</p></li><li><p><code>cacheGroups</code> 根据合适的分包策略（例如：没有经常更新的包打包为单独一个文件），将体积较大的包拆分为多个体积较小的包。每个包的输出文件都有独立的 hash。当下载或更新其中一个包时，只更新这个包的 hash，不会影响到其他包的 hash，这样就不会导致浏览器缓存失效。</p></li></ul><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 将 ElementPlus 打包为单独的输出文件</span>
        <span class="token literal-property property">elementPlus</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chunk-element-plus&#39;</span><span class="token punctuation">,</span>
          <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span>
              <span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">element-plus</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@element-plus</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 将 Vue 相关的包打包为单独的输出文件</span>
        <span class="token literal-property property">baseLib</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chunk-base-lib&#39;</span><span class="token punctuation">,</span>
          <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>
              module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span>
              <span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">@vue</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vue-loader</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vue-style-loader</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vue-template-compiler</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">vue-router</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">pinia</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">axios</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">lodash-es</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">core-js-pure</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">core-js-compact</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span> <span class="token operator">||</span>
                module<span class="token punctuation">.</span>resource<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>path<span class="token punctuation">.</span>sep<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">escape-html</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// 将剩余的包打包为单独的输出文件</span>
        <span class="token literal-property property">common</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;chunk-common&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          <span class="token literal-property property">reuseExistingChunk</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="note" tabindex="-1"><a class="header-anchor" href="#note" aria-hidden="true">#</a> Note</h3><ul><li><p><code>cacheGroups</code> 可以继承或者覆盖 <code>splitChunks.*</code> 中的任何配置选项。</p></li><li><p><code>test</code>, <code>priority</code>, <code>reuseExistingChunk</code> 只能在 <code>cacheGroups</code> 中配置。</p></li></ul>`,6);function U(nn,sn){const l=c("ExternalLinkIcon"),i=c("CodeTabs");return k(),d("div",null,[y,_,n("blockquote",null,[n("p",null,[s("Reference: "),n("a",j,[s("roles of split chunk"),o(l)])])]),f,x,n("blockquote",null,[w,n("ul",null,[n("li",null,[n("a",C,[s("chunks option"),o(l)])])])]),$,z,o(i,{id:"48",data:[{title:"webpack.config.js"},{title:"entry_a.js"},{title:"entry_b.js"}]},{tab0:a(({title:t,value:e,isActive:p})=>[A]),tab1:a(({title:t,value:e,isActive:p})=>[G]),tab2:a(({title:t,value:e,isActive:p})=>[E]),_:1},8,["data"]),S,o(i,{id:"72",data:[{title:"webpack.config.js"},{title:"entry_a.js"},{title:"entry_b.js"}]},{tab0:a(({title:t,value:e,isActive:p})=>[N]),tab1:a(({title:t,value:e,isActive:p})=>[R]),tab2:a(({title:t,value:e,isActive:p})=>[V]),_:1},8,["data"]),q,F,o(i,{id:"93",data:[{title:"webpack.config.js"},{title:"entry_a.js"},{title:"entry_b.js"}]},{tab0:a(({title:t,value:e,isActive:p})=>[B]),tab1:a(({title:t,value:e,isActive:p})=>[L]),tab2:a(({title:t,value:e,isActive:p})=>[T]),_:1},8,["data"]),I,P,O,o(i,{id:"117",data:[{title:"webpack.config.js"},{title:"entry_a.js"},{title:"entry_b.js"}]},{tab0:a(({title:t,value:e,isActive:p})=>[W]),tab1:a(({title:t,value:e,isActive:p})=>[X]),tab2:a(({title:t,value:e,isActive:p})=>[Y]),_:1},8,["data"]),Z,D,n("blockquote",null,[H,n("ul",null,[n("li",null,[n("a",J,[s("docs: cacheGroups option"),o(l)])]),n("li",null,[n("a",K,[s("blog: cacheGroups option"),o(l)])]),n("li",null,[n("a",M,[s("分包策略"),o(l)])])])]),Q])}const tn=u(g,[["render",U],["__file","index.html.vue"]]);export{tn as default};
